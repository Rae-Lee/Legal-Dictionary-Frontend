(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9bffc84"],{"0c2f":function(t,e,a){},1584:function(t,e,a){},"16af":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-preview dashboard"},[e("div",[e("span",{staticClass:"post-title"},[e("router-link",{staticClass:"post",attrs:{to:"/"}},[e("i",{staticClass:"fa-solid fa-angle-left angle post"})]),t._v(t._s(t.keyword.name)+" "),e("a",{attrs:{disabled:t.isProcessing},on:{click:function(e){return t.addFavorite(t.keyword.id)}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:!t.isFavorite,expression:"!isFavorite"}],staticClass:"fa-regular fa-heart heart"})]),e("a",{attrs:{disabled:t.isProcessing},on:{click:function(e){return t.deleteFavorite(t.keyword.id)}}},[e("i",{directives:[{name:"show",rawName:"v-show",value:t.isFavorite,expression:"isFavorite"}],staticClass:"fa-solid fa-heart heart"})])],1),e("hr",{staticClass:"horizon"}),e("div",{staticClass:"filters mt-5",attrs:{id:"filters"}},[e("router-link",{staticClass:"px-3 switch",attrs:{to:{name:"keywords articles",params:{id:t.keyword.id}}}},[t._v("相關法條")]),e("router-link",{staticClass:"px-3 switch",attrs:{to:{name:"keywords references",params:{id:t.keyword.id}}}},[t._v("相關裁判")]),e("router-link",{staticClass:"px-3 switch",attrs:{to:{name:"keywords notes",params:{id:t.keyword.id}}}},[t._v("我的筆記")])],1)])])},r=[],i={props:{keyword:{type:Object,required:!0},isFavorite:{type:Boolean,default:!1},isProcessing:{type:Boolean,default:!0}},methods:{async addFavorite(t){this.$emit("addFavorite",t)},async deleteFavorite(t){this.$emit("deleteFavorite",t)}}},o=i,n=(a("c1a2"),a("2877")),c=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=c.exports},"1b87":function(t,e,a){},6407:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mb-5 navbar mt-5"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"block-27"},[e("ul",[e("li",[t.previousPage?t._e():e("span",[t._v("<")]),t.previousPage?e("router-link",{staticClass:"link",attrs:{to:{name:t.$router.history.current.name,query:{page:t.previousPage}}}},[t._v("<")]):t._e()],1),t._l(t.listPage,(function(a){return e("li",{key:a,class:{active:t.currentPage===a}},[e("router-link",{staticClass:"link",attrs:{to:{name:t.$router.history.current.name,query:{page:a}}}},[t._v(t._s(a))])],1)})),e("li",{staticClass:"disabled",class:{disabled:t.currentPage===t.totalPage.length},attrs:{role:"button"}},[t.nextPage?t._e():e("span",[t._v(">")]),t.nextPage?e("router-link",{staticClass:"link",attrs:{to:{name:t.$router.history.current.name,query:{page:t.nextPage}}}},[t._v(">")]):t._e()],1)],2)])])])},r=[];a("14d9");const i=(t,e)=>{const a=[],s=Math.ceil(e/5),r=5*s<=t?5*s:t;for(let i=5*(s-1)+1;i<=r;i++)a.push(i);return a},o={listPage(t,e){return i(t,e)},previousPage(t){return t-1!==0?t-1:""},nextPage(t,e){return t!==e?t+1:""}};var n={props:{currentPage:{type:Number,default:1},totalPage:{type:Number,required:!0}},computed:{listPage(){return o.listPage(this.totalPage,this.currentPage)},previousPage(){return o.previousPage(this.currentPage)},nextPage(){return o.nextPage(this.currentPage,this.totalPage)}},created(){console.log(this.previousPage)}},c=n,d=(a("915e"),a("2877")),u=Object(d["a"])(c,s,r,!1,null,null,null);e["a"]=u.exports},7212:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[t.isProcessing?t._e():e("keywordTitle",{attrs:{keyword:t.keyword,"is-favorite":t.favorite,"is-processing":t.isProcessing},on:{addFavorite:t.addLike,deleteFavorite:t.deleteLike}}),t.errMessage?e("div",[t.errMessage?e("h1",{staticClass:"text-center err"},[t._v(t._s(t.errMessage))]):t._e()]):t._e(),t.errMessage?t._e():e("lawCard",{attrs:{articles:t.articles,currentPage:t.currentPage}})],1),e("pagination",{attrs:{totalPage:t.totalPage,currentPage:t.currentPage}})],1)},r=[],i=a("9ce8"),o=a("2fa3"),n=a("16af"),c=a("4cce"),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-author"},[e("div",{staticClass:"rank-title"},[t._v("引用排名 ")]),t._l(t.articles,(function(a,s){return e("div",{key:a.id},[e("div",{staticClass:"post-author d-flex my-5"},[e("div",{staticClass:"author-img"},[e("h1",{staticClass:"ps-3 pe-5",class:{rank:1===t.timeCites(s)||2===t.timeCites(s)||3===t.timeCites(s)}},[t._v(t._s(t.timeCites(s)))])]),e("div",{staticClass:"author-content pl-4 ps-5"},[a.Code.isAbandon?e("h5",{staticClass:"mb-3 field"},[t._v("已廢止")]):t._e(),e("h3",{staticClass:"mb-3"},[t._v(t._s(a.Code.name)+" 第 "+t._s(a.article_no)+" 條 ")]),e("p",{staticClass:"paragraph"},[t._v(t._s(a.content))])])]),e("hr",{staticClass:"h"})])}))],2)},u=[],l={props:{articles:{type:Array,required:!0},currentPage:{type:Number,default:1}},methods:{timeCites(t){return t+10*(this.currentPage-1)+1}}},g=l,h=(a("ed62"),a("2877")),p=Object(h["a"])(g,d,u,!1,null,null,null),v=p.exports,f=a("6407"),w={components:{lawCard:v,pagination:f["a"],keywordTitle:n["a"]},data(){return{articles:[],currentPage:1,totalPage:1,errMessage:"",keyword:{id:-1,name:""},favorite:!1,isProcessing:!0}},created(){const{page:t=""}=this.$route.query,{id:e}=this.$route.params;this.fetchData({page:t,id:e})},beforeRouteUpdate(t,e,a){const{id:s}=t.params,{page:r=""}=t.query;this.fetchData({page:r,id:s}),a()},methods:{async fetchData({page:t,id:e}){try{const a=await i["a"].getKeywordArticles({page:t,id:e}),s=await i["a"].getKeyword({id:e}),r=await i["a"].getFavorite({id:e});200!==a.data.status?(404===a.data.status&&(this.errMessage=a.data.message),Object(o["b"])(a.data,this.$router)):(this.articles=a.data.data.articles,this.currentPage=Number(a.data.pagination.currentPage),this.totalPage=Number(a.data.pagination.totalPage)),200!==s.data.status?(404===s.data.status&&(this.errMessage=s.data.message),Object(o["b"])(s.data,this.$router)):this.keyword={...this.keyword,...s.data.data},200!==r.data.status?Object(o["b"])(r.data,this.$router):this.favorite=r.data.data.isFavorite,this.isProcessing=!1}catch(a){this.isProcessing=!1,Object(o["b"])({status:500})}},async addLike(t){try{this.isProcessing=!0;const e=await c["a"].addFavorite({id:t}),{data:a}=e;if(200!==a.status)return Object(o["b"])(a,this.$router),void(this.isProcessing=!1);this.favorite=!0,this.isProcessing=!1}catch(e){Object(o["b"])({status:500})}},async deleteLike(t){try{this.isProcessing=!0;const e=await c["a"].deleteFavorite({id:t}),{data:a}=e;return 200!==a.status?(Object(o["b"])(a,this.$router),void(this.isProcessing=!1)):(this.favorite=!1,void(this.isProcessing=!1))}catch(e){Object(o["b"])({status:500})}}}},y=w,P=(a("bb6b"),Object(h["a"])(y,s,r,!1,null,null,null));e["default"]=P.exports},"915e":function(t,e,a){"use strict";a("0c2f")},9456:function(t,e,a){},"9ce8":function(t,e,a){"use strict";var s=a("2fa3");e["a"]={getTopKeyword(){return s["a"].get("/keywords/top")},getKeywordArticles({page:t,id:e}){const a=new URLSearchParams({page:t});return s["a"].get(`/keywords/${e}/articles?${a.toString()}`)},getKeywordReferences({page:t,id:e}){const a=new URLSearchParams({page:t});return s["a"].get(`/keywords/${e}/references?${a.toString()}`)},getKeywordNotes({page:t,id:e}){const a=new URLSearchParams({page:t});return s["a"].get(`/keywords/${e}/notes?${a.toString()}`)},addKeyword({name:t}){return s["a"].post("/keywords",{name:t})},getKeyword({id:t}){return s["a"].get("/keywords/"+t)},getFavorite({id:t}){return s["a"].get(`keywords/${t}/likes`)},addKeywordNotes({id:t,content:e}){return s["a"].post(`/keywords/${t}/notes`,{content:e})}}},bb6b:function(t,e,a){"use strict";a("9456")},c1a2:function(t,e,a){"use strict";a("1584")},ed62:function(t,e,a){"use strict";a("1b87")}}]);
//# sourceMappingURL=chunk-c9bffc84.aa362b78.js.map