(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ff7b4a4"],{"0c2f":function(e,t,a){},"16af":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"post-preview dashboard"},[t("div",[t("span",{staticClass:"post-title"},[t("router-link",{staticClass:"post",attrs:{to:"/home"}},[t("i",{staticClass:"fa-solid fa-angle-left angle post"})]),e._v(e._s(e.keyword.name)+" "),t("a",{attrs:{disabled:e.isProcessing},on:{click:function(t){return e.addFavorite(e.keyword.id)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.isFavorite,expression:"!isFavorite"}],staticClass:"fa-regular fa-heart heart"})]),t("a",{attrs:{disabled:e.isProcessing},on:{click:function(t){return e.deleteFavorite(e.keyword.id)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.isFavorite,expression:"isFavorite"}],staticClass:"fa-solid fa-heart heart"})])],1),t("hr",{staticClass:"horizon"}),t("div",{staticClass:"filters mt-5",attrs:{id:"filters"}},[t("router-link",{staticClass:"px-3 switch",attrs:{to:{name:"keywords articles",params:{id:e.keyword.id}}}},[e._v("相關法條")]),t("router-link",{staticClass:"px-3 switch",attrs:{to:{name:"keywords references",params:{id:e.keyword.id}}}},[e._v("相關裁判")]),t("router-link",{staticClass:"px-3 switch",attrs:{to:{name:"keywords notes",params:{id:e.keyword.id}}}},[e._v("我的筆記")])],1)])])},r=[],i={props:{keyword:{type:Object,required:!0},isFavorite:{type:Boolean,default:!1},isProcessing:{type:Boolean,default:!0}},methods:{async addFavorite(e){this.$emit("addFavorite",e)},async deleteFavorite(e){this.$emit("deleteFavorite",e)}}},o=i,n=(a("fcb1"),a("2877")),c=Object(n["a"])(o,s,r,!1,null,null,null);t["a"]=c.exports},3897:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",[e.isProcessing?e._e():t("keywordTitle",{attrs:{keyword:e.keyword,"is-favorite":e.favorite,"is-processing":e.isProcessing},on:{addFavorite:e.addLike,deleteFavorite:e.deleteLike}}),e.errMessage?t("div",[e.errMessage?t("h1",{staticClass:"text-center err"},[e._v(e._s(e.errMessage))]):e._e()]):e._e(),e.errMessage?e._e():t("referenceCard",{attrs:{references:e.references,currentPage:e.currentPage}})],1),t("pagination",{attrs:{totalPage:e.totalPage,currentPage:e.currentPage}})],1)},r=[],i=a("16af"),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"post-author"},[t("div",{staticClass:"rank-title"},[e._v("引用排名")]),e._l(e.references,(function(a,s){return t("div",{key:a.id},[t("div",{staticClass:"post-author d-flex my-5"},[t("div",{staticClass:"author-img"},[t("h1",{staticClass:"ps-3 pe-5",class:{rank:1===e.timeCites(s)||2===e.timeCites(s)||3===e.timeCites(s)}},[e._v(e._s(e.timeCites(s)))])]),t("div",{staticClass:"author-content pl-4 ps-5"},[t("h5",{staticClass:"mb-3 field"},[e._v(e._s(a.Field.name))]),t("h3",{staticClass:"mb-3"},[t("router-link",{staticClass:"text-capitalize",attrs:{to:{name:"reference",params:{id:a.id}}}},[e._v(e._s(a.name))])],1),t("p",{staticClass:"paragraph mb-3",domProps:{innerHTML:e._s(a.quote)}})])]),t("hr",{staticClass:"h"})])}))],2)},n=[],c={props:{references:{type:Array,required:!0},currentPage:{type:Number,default:1}},methods:{timeCites(e){return e+10*(this.currentPage-1)+1}}},d=c,u=(a("ae24"),a("2877")),l=Object(u["a"])(d,o,n,!1,null,null,null),g=l.exports,p=a("6407"),h=a("9ce8"),v=a("2fa3"),f=a("4cce"),y={components:{referenceCard:g,pagination:p["a"],keywordTitle:i["a"]},data(){return{references:[],currentPage:1,totalPage:1,errMessage:"",keyword:{id:-1,name:""},favorite:!1,isProcessing:!0}},created(){const{page:e=""}=this.$route.query,{id:t}=this.$route.params;this.fetchData({page:e,id:t})},beforeRouteUpdate(e,t,a){const{id:s}=e.params,{page:r=""}=e.query;this.fetchData({page:r,id:s}),a()},methods:{async fetchData({page:e,id:t}){try{const a=await h["a"].getKeywordReferences({page:e,id:t}),s=await h["a"].getKeyword({id:t}),r=await h["a"].getFavorite({id:t});200!==a.data.status?(404===a.data.status&&(this.errMessage=a.data.message),Object(v["b"])(a.data,this.$router)):(this.references=a.data.data.references,this.currentPage=Number(a.data.pagination.currentPage),this.totalPage=Number(a.data.pagination.totalPage)),200!==s.data.status?(404===s.data.status&&(this.errMessage=s.data.message),Object(v["b"])(s.data,this.$router)):this.keyword={...this.keyword,...s.data.data},200!==r.data.status?Object(v["b"])(r.data,this.$router):this.favorite=r.data.data.isFavorite,this.isProcessing=!1}catch(a){Object(v["b"])({status:500})}},async addLike(e){try{this.isProcessing=!0;const t=await f["a"].addFavorite({id:e}),{data:a}=t;if(console.log(a),200!==a.status)return Object(v["b"])(a,this.$router),void(this.isProcessing=!1);this.favorite=!0,this.isProcessing=!1}catch(t){Object(v["b"])({status:500})}},async deleteLike(e){try{this.isProcessing=!0;const t=await f["a"].deleteFavorite({id:e}),{data:a}=t;return 200!==a.status?(Object(v["b"])(a,this.$router),void(this.isProcessing=!1)):(this.$emit("deleteFavorite",e),this.favorite=!1,void(this.isProcessing=!1))}catch(t){Object(v["b"])({status:500})}}}},m=y,w=Object(u["a"])(m,s,r,!1,null,null,null);t["default"]=w.exports},5355:function(e,t,a){},6407:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row mb-5 navbar mt-5"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"block-27"},[t("ul",[t("li",[e.previousPage?e._e():t("span",[e._v("<")]),e.previousPage?t("router-link",{staticClass:"link",attrs:{to:{name:e.$router.history.current.name,query:{page:e.previousPage}}}},[e._v("<")]):e._e()],1),e._l(e.listPage,(function(a){return t("li",{key:a,class:{active:e.currentPage===a}},[t("router-link",{staticClass:"link",attrs:{to:{name:e.$router.history.current.name,query:{page:a}}}},[e._v(e._s(a))])],1)})),t("li",{staticClass:"disabled",class:{disabled:e.currentPage===e.totalPage.length},attrs:{role:"button"}},[e.nextPage?e._e():t("span",[e._v(">")]),e.nextPage?t("router-link",{staticClass:"link",attrs:{to:{name:e.$router.history.current.name,query:{page:e.nextPage}}}},[e._v(">")]):e._e()],1)],2)])])])},r=[];a("14d9");const i=(e,t)=>{const a=[],s=Math.ceil(t/5),r=5*s<=e?5*s:e;for(let i=5*(s-1)+1;i<=r;i++)a.push(i);return a},o={listPage(e,t){return i(e,t)},previousPage(e){return e-1!==0?e-1:""},nextPage(e,t){return e!==t?e+1:""}};var n={props:{currentPage:{type:Number,default:1},totalPage:{type:Number,required:!0}},computed:{listPage(){return o.listPage(this.totalPage,this.currentPage)},previousPage(){return o.previousPage(this.currentPage)},nextPage(){return o.nextPage(this.currentPage,this.totalPage)}},created(){console.log(this.previousPage)}},c=n,d=(a("915e"),a("2877")),u=Object(d["a"])(c,s,r,!1,null,null,null);t["a"]=u.exports},"915e":function(e,t,a){"use strict";a("0c2f")},"9ce8":function(e,t,a){"use strict";var s=a("2fa3");t["a"]={getTopKeyword(){return s["a"].get("/keywords/top")},getKeywordArticles({page:e,id:t}){const a=new URLSearchParams({page:e});return s["a"].get(`/keywords/${t}/articles?${a.toString()}`)},getKeywordReferences({page:e,id:t}){const a=new URLSearchParams({page:e});return s["a"].get(`/keywords/${t}/references?${a.toString()}`)},getKeywordNotes({page:e,id:t}){const a=new URLSearchParams({page:e});return s["a"].get(`/keywords/${t}/notes?${a.toString()}`)},addKeyword({name:e}){return s["a"].post("/keywords",{name:e})},getKeyword({id:e}){return s["a"].get("/keywords/"+e)},getFavorite({id:e}){return s["a"].get(`keywords/${e}/likes`)},addKeywordNotes({id:e,content:t}){return s["a"].post(`/keywords/${e}/notes`,{content:t})}}},ae24:function(e,t,a){"use strict";a("be61")},be61:function(e,t,a){},fcb1:function(e,t,a){"use strict";a("5355")}}]);
//# sourceMappingURL=chunk-2ff7b4a4.aee8d27b.js.map