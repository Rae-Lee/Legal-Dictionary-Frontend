(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-344f2980"],{"3f74":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},t._l(t.users,(function(e){return s("div",{key:e.id,staticClass:"col-sm-4"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(e.account)+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.deletedAt,expression:"user.deletedAt"}],staticClass:"status"},[t._v("已暫停")])]),s("p",[t._v(t._s(e.email))])]),s("ul",{staticClass:"list-group list-group-flush"},[s("li",{staticClass:"list-group-item"},[t._v(t._s(e.favoriteCounts)+" 個收藏")]),s("li",{staticClass:"list-group-item"},[t._v(t._s(e.noteCounts)+" 篇筆記")])]),s("div",{staticClass:"card-body d-flex justify-content-center"},[s("button",{directives:[{name:"show",rawName:"v-show",value:!e.deletedAt,expression:"!user.deletedAt"}],staticClass:"card-link edit-button btn btn-secondary",attrs:{type:"button"},on:{click:function(s){return t.suspendUser(e)}}},[t._v("暫停")]),s("button",{directives:[{name:"show",rawName:"v-show",value:e.deletedAt,expression:"user.deletedAt"}],staticClass:"card-link edit-button btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(s){return t.unsuspendUser(e)}}},[t._v("解除")])])])])})),0)])},n=[],i=e("2fa3"),r={getUsers(){return i["a"].get("/admin/users")},suspendUser({id:t}){return i["a"].delete("/admin/users/"+t)},unsuspendUser({id:t}){return i["a"].put("/admin/users/"+t)}},u=e("3d20"),c=e.n(u),d={data(){return{users:[]}},created(){this.fetchData()},methods:{async fetchData(){try{const t=await r.getUsers(),{data:s}=t;if(200!==s.status)return void Object(i["b"])(s,this.$router);this.users=s.data.users}catch(t){Object(i["b"])({status:500})}},async suspendUser(t){try{const s=await c.a.fire({title:"你是否真的要暫停該用戶?",showCancelButton:!0,confirmButtonText:"暫停",cancelButtonText:"取消"});if(s.value){const s=t.id,e=await r.suspendUser({id:s}),{data:a}=e;if(200!==a.status)return void Object(i["b"])(a,this.$router);this.users=this.users.map(t=>t.id===s?{...t,deletedAt:new Date}:t),Object(i["c"])(a)}}catch(s){Object(i["b"])({status:500})}},async unsuspendUser(t){try{const s=t.id,e=await r.unsuspendUser({id:s}),{data:a}=e;return 200!==a.status?void Object(i["b"])(a,this.$router):(this.users=this.users.map(t=>t.id===s?{...t,deletedAt:null}:t),void Object(i["c"])(a))}catch(s){Object(i["b"])({status:500})}}}},o=d,l=(e("764e"),e("2877")),v=Object(l["a"])(o,a,n,!1,null,null,null);s["default"]=v.exports},"4f49":function(t,s,e){},"764e":function(t,s,e){"use strict";e("4f49")}}]);
//# sourceMappingURL=chunk-344f2980.938bfdb3.js.map